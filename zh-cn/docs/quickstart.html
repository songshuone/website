<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="keywords" content="quickstart" />
    <meta name="description" content="quickstart" />
    <!-- 网页标签标题 -->
    <title>quickstart</title>
    <link rel="shortcut icon" href="/img/favicon.ico"/>
    <link rel="stylesheet" href="/build/documentation.css" />
  </head>
  <body>
    <div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/zh-cn/index.html"><img class="logo" src="https://img.alicdn.com/tfs/TB1ThlOucfpK1RjSZFOXXa6nFXa-266-72.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">En</span><div class="header-menu"><img class="header-menu-toggle" src="/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/zh-cn/index.html" target="_self">首页</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/zh-cn/docs/overview/what_is_dragonfly.html" target="_self">文档</a></li><li class="menu-item menu-item-normal"><a href="/zh-cn/blog/index.html" target="_self">博客</a></li><li class="menu-item menu-item-normal"><a href="/zh-cn/community/index.html" target="_self">社区</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="https://img.alicdn.com/tfs/TB1sfAnt9zqK1RjSZFHXXb3CpXa-160-160.png" class="front-img"/><span>文档</span><img src="https://img.alicdn.com/tfs/TB1sfAnt9zqK1RjSZFHXXb3CpXa-160-160.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>Dragonfly</span><ul><li style="height:108px;overflow:hidden" class="menu-item menu-item-level-2"><span>概述<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/overview/what_is_dragonfly.html" target="_self">什么是 Dragonfly？</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/overview/terminology.html" target="_self">术语表</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/quickstart.html" target="_self">快速开始</a></li><li style="height:180px;overflow:hidden" class="menu-item menu-item-level-2"><span>使用指南<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/userguide/install_server.html" target="_self">安装服务端</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/userguide/install_client.html" target="_self">安装客户端</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/userguide/download_files.html" target="_self">下载文件</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/userguide/supernode_configuration.html" target="_self">超级节点配置</a></li></ul></li><li style="height:108px;overflow:hidden" class="menu-item menu-item-level-2"><span>CLI 参考<img style="transform:rotate(0deg)" class="menu-toggle" src="/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/cli_ref/dfdaemon.html" target="_self">dfdaemon</a></li><li class="menu-item menu-item-level-3"><a href="/zh-cn/docs/cli_ref/dfget.html" target="_self">dfget</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/api.html" target="_self">API 参考</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/faq.html" target="_self">常见问题</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h1>Dragonfly 快速入门</h1>
<p>在本快速入门文档中，为了让您快速上手 Dragonfly，您首先要在 Docker 容器中启动一个 <a href="overview/terminology.md">SuperNode</a>（服务端），并安装 Dragonfly 客户端，然后下载一个容器镜像或普通文件，这些下载工作可能是实际场景中经常要做的。</p>
<h2>前提条件</h2>
<p>Docker 容器已启动。</p>
<h2>步骤 1：在 Docker 容器中启动 SuperNode（服务端）</h2>
<ol>
<li>
<p>拉取我们提供的 Docker 镜像。</p>
<pre><code class="language-bash"><span class="hljs-comment"># 将 ${imageName} 替换为真实镜像名称</span>
docker pull <span class="hljs-variable">${imageName}</span>
</code></pre>
<p><strong>注意：</strong> 请根据您所处的地理位置选择我们提供的一个镜像，并用其替换 <code>${imageName}</code>：</p>
<ul>
<li>中国：<code>registry.cn-hangzhou.aliyuncs.com/dragonflyoss/supernode:0.2.1</code></li>
<li>美国：<code>registry.us-west-1.aliyuncs.com/dragonflyoss/supernode:0.2.1</code></li>
</ul>
</li>
<li>
<p>启动 SuperNode。</p>
<pre><code class="language-bash"><span class="hljs-comment"># 将 ${imageName} 替换为真实镜像名称</span>
docker run -d -p 8001:8001 -p 8002:8002 <span class="hljs-variable">${imageName}</span>
</code></pre>
</li>
</ol>
<p>例如，如果您在中国，则运行以下命令：</p>
<pre><code class="language-bash">docker pull registry.cn-hangzhou.aliyuncs.com/dragonflyoss/supernode:0.2.1

docker run -d -p 8001:8001 -p 8002:8002 registry.cn-hangzhou.aliyuncs.com/dragonflyoss/supernode:0.2.1
</code></pre>
<h2>步骤 2：安装 Dragonfly 客户端</h2>
<p>有两种方法可以安装 Dragonfly 客户端：从源码安装，或者通过拉取镜像来安装。</p>
<h3>方法 1：从源码安装</h3>
<ol>
<li>
<p>下载客户端的包。</p>
<pre><code class="language-bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">$HOME</span>
<span class="hljs-comment"># 将 ${package} 替换为适合您的操作系统和位置的包</span>
wget <span class="hljs-variable">${package}</span>
</code></pre>
<p><strong>注意：</strong> 请根据您所处的地理位置选择我们提供的一个包，并用其替换 <code>${package}</code>：</p>
<ul>
<li>
<p>如果您在中国：</p>
<ul>
<li>
<p><a href="http://dragonflyoss.oss-cn-hangzhou.aliyuncs.com/df-client_0.2.1_linux_amd64.tar.gz">Linux 64-bit</a>: <code>http://dragonflyoss.oss-cn-hangzhou.aliyuncs.com/df-client_0.2.1_linux_amd64.tar.gz</code></p>
</li>
<li>
<p><a href="http://dragonflyoss.oss-cn-hangzhou.aliyuncs.com/df-client_0.2.1_darwin_amd64.tar.gz">MacOS 64-bit</a>: <code>http://dragonflyoss.oss-cn-hangzhou.aliyuncs.com/df-client_0.2.1_darwin_amd64.tar.gz</code></p>
</li>
</ul>
</li>
<li>
<p>如果您不在中国：</p>
<ul>
<li>
<p><a href="https://github.com/dragonflyoss/Dragonfly/releases/download/v0.2.1/df-client_0.2.1_linux_amd64.tar.gz">Linux 64-bit</a>: <code>https://github.com/dragonflyoss/Dragonfly/releases/download/v0.2.1/df-client_0.2.1_linux_amd64.tar.gz</code></p>
</li>
<li>
<p><a href="https://github.com/dragonflyoss/Dragonfly/releases/download/v0.2.1/df-client_0.2.1_darwin_amd64.tar.gz">MacOS 64-bit</a>: <code>https://github.com/dragonflyoss/Dragonfly/releases/download/v0.2.1/df-client_0.2.1_darwin_amd64.tar.gz</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>将包解压。</p>
<pre><code class="language-bash"><span class="hljs-comment"># 将 ${package} 替换为适合您的操作系统和位置的包</span>
tar -zxf <span class="hljs-variable">${package}</span>
</code></pre>
</li>
<li>
<p>将 <code>df-client</code> 目录添加到 <code>PATH</code> 环境变量，以便直接使用 <code>dfget</code> 和 <code>dfdaemon</code> 命令。</p>
<pre><code class="language-bash"><span class="hljs-comment"># 执行或将这一行添加到 ~/.bashrc</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$HOME</span>/df-client/
</code></pre>
</li>
</ol>
<p>例如，如果您在中国且使用 Linux，则运行以下命令：</p>
<pre><code class="language-bash"><span class="hljs-built_in">cd</span> <span class="hljs-variable">$HOME</span>
wget http://dragonflyoss.oss-cn-hangzhou.aliyuncs.com/df-client_0.2.1_linux_amd64.tar.gz
tar -zxf df-client_0.2.1_linux_amd64.tar.gz
<span class="hljs-comment"># 执行或将这一行添加到 ~/.bashrc</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$HOME</span>/df-client/
</code></pre>
<h3>方法 2：通过拉取镜像来安装</h3>
<ol>
<li>
<p>拉取我们提供的 Docker 镜像。</p>
<pre><code class="language-bash">docker pull dragonflyoss/dfclient:v0.3.0_dev
</code></pre>
</li>
<li>
<p>启动 dfdaemon。</p>
<pre><code class="language-bash">docker run -d -p 65001:65001 dragonflyoss/dfclient:v0.3.0_dev --registry https://xxx.xx.x
</code></pre>
</li>
<li>
<p>配置 Daemon 镜像。</p>
<p>a.修改配置文件 <code>/etc/docker/daemon.json</code>。</p>
<pre><code class="language-sh">vi /etc/docker/daemon.json
</code></pre>
<p><strong>提示：</strong> 如需进一步了解 <code>/etc/docker/daemon.json</code>，请参考 <a href="https://docs.docker.com/registry/recipes/mirror/#configure-the-cache">Docker 文档</a>。</p>
<p>b.在配置文件中添加或更新配置项 <code>registry-mirrors</code>。</p>
<pre><code class="language-sh"><span class="hljs-string">"registry-mirrors"</span>: [<span class="hljs-string">"http://127.0.0.1:65001"</span>]
</code></pre>
<p>c.重启 Docker Daemon。</p>
<pre><code class="language-bash">systemctl restart docker
</code></pre>
</li>
</ol>
<h2>步骤 3：下载镜像或文件</h2>
<p>现在已经启动 SuperNode 并安装 Dragonfly 客户端，所以可以开始下载镜像或普通文件了。Dragonfly 支持下载这两类文件，但下载方法略有不同。</p>
<h3>场景 1：用 Dragonfly 下载普通文件</h3>
<p>安装 Dragonfly 客户端后，即可使用 <code>dfget</code> 命令下载文件。</p>
<pre><code class="language-bash">dfget -u <span class="hljs-string">'https://github.com/dragonflyoss/Dragonfly/blob/master/docs/images/logo.png'</span> -o /tmp/logo.png
</code></pre>
<p>**提示：**如需进一步了解 dfget 命令，请参考 <a href="cli_ref/dfget.md">dfget</a>。</p>
<h3>场景 2：用 Dragonfly 拉取镜像</h3>
<ol>
<li>
<p>以指定的 Registry 启动 <code>dfdaemon</code>，例如 <code>https://index.docker.io</code>。</p>
<pre><code class="language-bash">nohup dfdaemon --registry https://index.docker.io &gt; /dev/null 2&gt;&amp;1 &amp;
</code></pre>
</li>
<li>
<p>将以下这一行添加到 Dockerd 配置文件 <a href="https://docs.docker.com/registry/recipes/mirror/#configure-the-docker-daemon">/etc/docker/daemon.json</a>。</p>
<pre><code class="language-json">"registry-mirrors": ["http://127.0.0.1:65001"]
</code></pre>
</li>
<li>
<p>重启 Dockerd。</p>
<pre><code class="language-bash">systemctl restart docker
</code></pre>
</li>
<li>
<p>用 Dragonfly 拉取镜像。</p>
<pre><code class="language-bash">docker pull nginx:latest
</code></pre>
</li>
</ol>
<h2>相关文档</h2>
<ul>
<li><a href="userguide/install_server.md">安装服务端</a></li>
<li><a href="userguide/install_client.md">安装客户端</a></li>
<li><a href="userguide/download_files.md">下载文件</a></li>
<li><a href="userguide/supernode_configuration.md">SuperNode 配置</a></li>
<li><a href="cli_ref/dfget.md">Dfget</a></li>
</ul>
</div></section><footer class="footer-container"><div class="footer-body"><img src="https://img.alicdn.com/tfs/TB1H9Eht9zqK1RjSZPxXXc4tVXa-266-72.png"/><div class="cols-container"><div class="col col-12"><h3>愿景</h3><p>Dragonfly 致力于解决大规模文件分发的效率问题，打造容器镜像分发的第一解决方案和标准规范，并为用户提供高可用、高效率以及简单易用的文件及镜像分发服务。</p></div><div class="col col-6"><dl><dt>文档</dt><dd><a href="/zh-cn/docs/overview/what_is_dragonfly.html" target="_self">什么是 Dragonfly？</a></dd><dd><a href="/zh-cn/docs/quickstart.html" target="_self">快速开始</a></dd><dd><a href="/en-us/docs/userguide/install_server.html" target="_self">安装服务端</a></dd><dd><a href="/en-us/docs/userguide/install_client.html" target="_self">安装客户端</a></dd><dd><a href="/en-us/docs/userguide/download_files.html" target="_self">下载文件</a></dd></dl></div><div class="col col-6"><dl><dt>资源</dt><dd><a href="/zh-cn/blog/index.html" target="_self">博客</a></dd><dd><a href="/zh-cn/community/index.html" target="_self">社区</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2018 dragonflyoss<!-- --> | <a href="https://www.cnzz.com/stat/website.php?web_id=1275746144" target="_blank"><img border="0" hspace="0" vspace="0" src="https://icon.cnzz.com/img/pic.gif"/></a></span></div></div></footer></div></div>
    <script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
    <script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
    <script>
      window.rootPath = '';
    </script>
    <script src="/build/documentation.js"></script>
    <script src="https://s23.cnzz.com/z_stat.php?id=1275746144&web_id=1275746144&show=none" language="JavaScript"></script>
  </body>
</html>
